<nav class="navbar navbar-expand-xl fixed-top navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"/>
            {% load static %}
            <img class="w-16 me-2" src="{% static 'images/logo.svg' %}">
            <span class="d-none d-sm-inline fw-bold">Studentorchesteret Dei Taktlause</span>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsable"
            aria-controls="collapsable" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="collapsable">
            <ul class="navbar-nav me-auto">
                {% load get_navbar_items %}
                {% get_navbar_items as navbar_items %}
                {% for item in navbar_items %}
                    <li class="nav-item dropdown">
                        <a class="
                            nav-link
                            {% if item.is_active %} active {% endif %}
                            {% if item.is_dropdown %} dropdown-toggle {% endif %}
                            "
                            href="{{item.href}}"
                            {% if item.is_dropdown %}
                                id="dropdown-button-{{item.pk}}"
                                role="button"
                                data-bs-toggle="dropdown"
                                {% if item.is_active %}
                                    aria-expanded="true"
                                {% else %}
                                    aria-expanded="false"
                                {% endif %}
                            {% endif %}>
                            {{item.text}}
                        </a>
                        {% if item.is_dropdown %}
                            <ul class="dropdown-menu navbar-dropdown-menu" aria-labelledby="dropdown-button-{{item.pk}}">
                                {% for sub_item in item.sub_items_annotated %}
                                    <li class="nav-item">
                                        <a class="
                                            dropdown-item
                                            nav-link
                                            bg-reset
                                            {% if sub_item.is_active %}active{% endif %}
                                            "
                                            href="{{sub_item.link}}">
                                            {{sub_item.text}}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
            <ul class="nav navbar-nav">
                <li class="nav-item">
                    <span class="navbar-text">
                        {% if user.is_authenticated %}
                        <span>Innlogga som <a href="{% url 'accounts:ProfileDetail' user.slug %}">{{user.username}}</a>!</span>
                        <a href="{% url 'logout' %}?next=/">Logg ut</a>
                        {% else %}
                        <span>Du er ikkje innlogga. <a href="{% url 'login' %}">Logg inn</a></span>
                        {% endif %}
                    </span>
                </li>
            </ul>
        </div>
    </div>
</nav>

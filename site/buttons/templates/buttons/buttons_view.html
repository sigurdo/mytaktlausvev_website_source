{% extends 'base.html' %}

{% block title_page %} Buttonpdfgenerator {% endblock title_page %}
{% block title_content %} Buttonpdfgenerator {% endblock title_content %}

{% block content %}
    <section>
        {% load embeddable_text markdown %}
        {% get_embeddable_text "Framgangsm√•te for buttonpdfgenerator" as text %}
        {{ text | markdown }}
    </section>

    {% load crispy_forms_tags %}
    {% crispy form %}

    <section class="mt-5">
        <header class="mb-2">
            <h2 class="mb-0">Motivbibliotek</h2>

            <a href="{% url 'buttons:ButtonDesignCreate' %}" class="btn btn-primary btn-sm my-1">Nytt motiv</a>
        </header>
        {% get_embeddable_text "Buttonmotivbibliotek" as text %}
        {{ text | markdown }}

        <ul class="row row-cols-2 row-cols-md-3 row-cols-xl-4 g-4 list-unstyled">
            {% for button_design in button_designs %}
            <li class="col">
                <div class="card h-100">
                    <div class="h-40 d-flex align-items-center justify-content-center">
                        {% include "pictures/includes/image.html" with image=button_design bp_gallery="button_designs" only %}
                    </div>
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <h3 class="card-title fs-5 mb-0">{{ button_design.name }}</h3>

                        {% if perms.buttons.change_buttondesign or perms.buttons.delete_buttondesign or button_design.created_by == request.user %}
                        <ul class="list-inline d-flex justify-content-center mt-2">
                            {% if perms.buttons.change_buttondesign or button_design.created_by == request.user %}
                            <li class="list-inline-item">
                                <a href="{% url 'buttons:ButtonDesignUpdate' button_design.slug %}" class="btn btn-primary btn-sm">Rediger</a>
                            </li>
                            {% endif %}
                            {% if perms.buttons.delete_buttondesign or button_design.created_by == request.user %}
                            <li class="list-inline-item">
                                <a href="{% url 'buttons:ButtonDesignDelete' button_design.slug %}" class="btn btn-primary btn-sm">Slett</a>
                            </li>
                            {% endif %}
                        </ul>
                        {% endif %}
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </section>
{% endblock content %}

{% block js %}
    <script
        src="https://cdn.jsdelivr.net/npm/bigpicture@2.6.1/dist/BigPicture.min.js"
        integrity="sha256-OsbS8Cw/fMpgT6GBFfqhvmX9yJLwzE6+me56KzpSbAs="
        crossorigin="anonymous"
    ></script>
    {% load static %}
    <script src="{% static "common/js/lightbox.js" %}"></script>
{% endblock js %}
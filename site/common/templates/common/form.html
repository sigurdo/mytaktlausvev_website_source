{% extends "base.html" %}
{% load utils %}

{% block title %}
    {% if form_title %}
        {{ form_title }}
    {% elif object %}
        Rediger {{ object | verbose_name }} "{{ object }}"
    {% elif view.model %}
        Opprett
        {{ view.model | verbose_name }}
    {% else %}
        Skjema
    {% endif %}
{% endblock %}

{% block sidebar %}{% endblock sidebar %}

{% block page %}
<article>
    <header>
        {% if breadcrumbs %}
            {% include "common/includes/breadcrumbs.html" with breadcrumbs=breadcrumbs only %}
        {% endif %}

        <h1>
            {% if form_title %}
                {{ form_title }}
            {% elif object %}
                Rediger {{ object | verbose_name }} "{{ object }}"
            {% elif view.model %}
                Opprett
                {{ view.model | verbose_name }}
            {% else %}
                Skjema
            {% endif %}
        </h1>
    </header>

    {% if nav_tabs %}
        <nav>
            {% load utils %}
            <ul class="nav nav-tabs mb-3">
            {% for nav_tab in nav_tabs %}
                {% if not nav_tab.permissions or nav_tab.permissions|contained_in:perms %}
                <li class="nav-item">
                    <a
                        class="nav-link {% if request.path == nav_tab.url %} active {% endif %}"
                        {% if request.path == nav_tab.url %}aria-current="page"{% endif %}
                        href="{{ nav_tab.url }}"
                    >
                        {{ nav_tab.name }}
                    </a>
                </li>
                {% endif %}
            {% endfor %}
            </ul>
        </nav>
    {% endif %}

    {% block form %}
        {% if form and formset %}
        <form method="post">
        {% endif %}
            {% if form %}
                {% load crispy_forms_tags %}
                {% crispy form %}
            {% endif %}
            {% if formset %}
                {% load crispy_forms_tags %}
                {% crispy formset %}
            {% endif %}
        {% if form and formset %}
        </form>
        {% endif %}
    {% endblock form %}
</article>
{% endblock %}

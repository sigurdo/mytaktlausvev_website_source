
{% extends "base.html" %}

{% block title %}Hendingar{% if year %} {{year}}{% endif %}{% endblock title %}

{% block page %}
<article class="mt-4">
    <header class="mb-4">
        <h1>Hendingar{% if year %} {{year}}{% endif %}</h1>
    </header>

    <section class="mb-3">
        <p>
            {% if year %}
            <a class="btn btn-primary" href="{% url "events:EventList" year|add:"-2" %}"> {{year|add:"-2"}} </a>
            <a class="btn btn-primary" href="{% url "events:EventList" year|add:"-1" %}"> {{year|add:"-1"}} </a>
            <a class="btn btn-primary active" href="{% url "events:EventList" year|add:"0" %}"> {{year|add:"0"}} </a>
            <a class="btn btn-primary" href="{% url "events:EventList" year|add:"1" %}"> {{year|add:"1"}} </a>
            <a class="btn btn-primary" href="{% url "events:EventList" year|add:"2" %}"> {{year|add:"2"}} </a>
        </p>
        <p>
            <a class="btn btn-primary" href="{% url "events:EventList" %}"> Alle framtidige </a>
            {% else %}
                {% now "Y" as current_year %}
                <a class="btn btn-primary" href="{% url "events:EventList" current_year %}"> Heile Ã¥ret </a>
            {% endif %}
        </p>
        <p>
            <button class="btn btn-primary" id="ical-link-collapse-button" type="button">
                Hent link til ical-feed
            </button>
            <span class="collapse m-3" id="ical-link-collapse">
                <a id="ical-link" href="{{ event_feed_absolute_url }}">
                    {{ event_feed_absolute_url }}
                </a>
                <span id="ical-link-collapse-clipboard-feedback"></span>
            </span>
        </p>
    </section>


    {% if events %}
    <section>
    {% regroup events by start_month as events_grouped %}
    <ol class="list-unstyled">
        {% for group in events_grouped %}
        <li>
            <h2> {{ group.grouper|date:"F"|capfirst }} {% if not year %}{{ group.grouper|date:"Y" }}{% endif %} </h2>
            <hr>

            <ol class="list-unstyled">
                {% for event in group.list %}
                <li>
                    {% include "events/includes/event_list_card.html" with event=event user=user csrf_token=csrf_token only %}
                </li>
                {% endfor %}
            </ol>
        </li>
        {% endfor %}
    </ol>
    </section>
    {% endif %}
</article>
{% endblock page %}

{% block js %}
    {% load static %}
    <script src="{% static "events/event_list.js" %}"></script>
{% endblock js %}